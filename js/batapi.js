!function(e){function t(e,t,n){if(e){t=t||{};for(var a in t){if(n){if("string"==typeof n&&a==n)continue;if(n instanceof Array&&-1!=n.indexOf(a))continue}e[a]=t[a]}return e}}function n(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("hxfz bat")}return $$=BatJsApi={},menuDefine=function(){return{"menuItem:exposeArticle":{id:"menuItem:exposeArticle",text:"举报",handler:function(e){alert("举报成功")}},"menuItem:refresh":{id:"menuItem:refresh",text:"刷新",handler:function(e){alert("刷新成功")}},"menuItem:share":{id:"menuItem:share",text:"分享",handler:function(e){CommonFun.doShare(void 0,void 0,{url:window.location.href})}},"menuItem:favorite":{id:"menuItem:favorite",text:"收藏",handler:function(e){alert("menuItem:favorite")}},"menuItem:copyUrl":{id:"menuItem:copyUrl",text:"复制链接",handler:function(e){}}}}(),t(BatJsApi,{init:function(e){var t=this;if(void 0!=this.inited)throw new Exception("BatJSBridge has inited!!!");this.inited=0,e=e||{};var a=document.createElement("script");n()?a.src="applocal://cordova.js":a.src="cordova.js",document.head.appendChild(a),document.addEventListener("deviceready",function(){t.inited=1,e.menuList&&t.addMenu({menuList:e.menuList}),e.ready&&"function"==typeof e.ready&&e.ready()},!1)},getToken:function(e){e=e||{},n()?CommonFun.GetAppToken(e.success,e.error,t({},e,["success","error"])):alert("请在宝安通app打开此页面")},getLocation:function(e){e=e||{};navigator.geolocation.getCurrentPosition(e.success,e.error,null)},watchLocation:function(e){e=e||{};var n={};return navigator.geolocation.watchPosition(e.success,e.error,t(n,e,["success","error"]))},clearWatchLocation:function(e){navigator.geolocation.clearWatch(e)},getDevice:function(e){e.success(device)},scanQRCode:function(e){e=e||{},cordova.plugins.barcodeScanner.scan(e.success,e.error)},batteryStatus:function(e){window.addEventListener("batterystatus",e,!1)},batteryLow:function(e){window.addEventListener("batterylow",e,!1)},batteryCritical:function(e){window.addEventListener("batterycritical",e,!1)},startRecord:function(){var e=this,t="BaoanTong/audio/"+(new Date).getTime()+".mp3";if(this.media&&Media.MEDIA_NONE!=e.media.status)throw new Exception("请先停止当前录音程序");return this.media=new Media(t,function(){console.log("recordAudio():Audio Success")},function(e){console.log("recordAudio():Audio Error: "+e.code)},function(t){e.media.status=t}),this.media.status=Media.MEDIA_NONE,this.media.startRecord(),this.media},stopRecord:function(){Media.MEDIA_RUNNING==this.media.status&&this.media.stopRecord()},createContact:function(e){var t=e.contact;t||alert("contact对象不能为空");for(var n=["phoneNumbers","emails","photos","categories","urls"],a=0;a<n.lenth;a++){var r=t[n[a]],o=[];if(r){for(var i=0;i<r.length;i++){var s=r[i];if(s instanceof ContactField)o.push(s);else{var c=new ContactField(s.type,s.value,s.pref);o.push(c)}}t[n[a]]=o}}if(t.addresses){for(var d=[],a=0;a<t.addresses.length;a++){var u=t.addresses[a];if(u instanceof ContactAddress)d.push(u);else{var l=new ContactAddress;l.pref=u.pref,l.type=u.type,l.formatted=u.formatted,l.streetAddress=u.streetAddress,l.locality=u.locality,l.region=u.region,l.postalCode=u.postalCode,l.country=u.country,d.push(l)}}t.addresses=d}if(t.organizations){for(var f=[],a=0;a<t.organizations.length;a++){var m=t.organizations[a];if(m instanceof ContactAddress)f.push(m);else{var p=new ContactOrganization;p.pref=m.pref,p.type=m.type,p.name=m.name,p.department=m.department,p.title=m.title,f.push(p)}}t.organizations=f}var v=navigator.contacts.create(t);return v.save(e.success,e.error),v},findContact:function(e){var t=new ContactFindOptions;t.filter=e.search||"",t.multiple=!0,t.desiredFields=[navigator.contacts.fieldType.id],t.hasPhoneNumber=!0;var n=[navigator.contacts.fieldType.displayName,navigator.contacts.fieldType.name,navigator.contacts.fieldType.phoneNumbers];return navigator.contacts.find(n,e.success,e.error,t)},pickContact:function(e){navigator.contacts.pickContact(e)},doShare:function(e){e=e||{},CommonFun.doShare(e.success,e.error,t({},e,["success","error"]))},addMenu:function(e){var t=e.menuList;if(t){var n=[];window.menuHandler=window.menuHandler||{},!e instanceof Array&&(e=[e]);for(var a=0;a<t.length;a++){var r=t[a];if("string"==typeof r){var o="menu_"+cordova.callbackId++;window.menuHandler[o]=menuDefine[r].handler;var i={id:r,title:menuDefine[r].text,callback:"menuHandler['"+o+"'].apply(menuHandler['"+o+"'])"};n.push(i)}else{var o="menu_"+cordova.callbackId++;r.handler?window.menuHandler[o]=r.handler:menuDefine[r.id].handler&&(window.menuHandler[o]=menuDefine[r.id].handler);var i={id:r.id,title:r.text,callback:"menuHandler['"+o+"'].apply(menuHandler['"+o+"'])"};n.push(i)}}CommonFun.addmenu(e.success,e.error,n)}}})}(this);